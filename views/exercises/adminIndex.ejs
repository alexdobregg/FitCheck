<% layout('layouts/boilerplate')%>
<div class="row">
    <form action="/exercises/admin/index/"  method="GET" class="mx-auto mb-3" onSubmit="submitConvertAction()" target="sub" style="width: 30rem;">
        <input class="form-control" type="search" id="search_bar" placeholder="Search by muscle type keyword" aria-label="Search">
    </form>
</div>
<% for (let exercise of allExercises){%>
    <div class="row">
        <div class="container d-flex justify-content-center align-items-center card mb-3" style="width: 35rem;">
            <div class="card-body" style="width: 100%">
                <div class="row">
                    <h5 class="card-title text-center">
                        <%= exercise.name + " - " + exercise.muscle %>
                    </h5>
                    <div class="mb-3 text-center">
                        <%= exercise.instructions %>
                    </div>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col">
                    <a class="btn btn-primary btn-block" role="button" href="/exercises/<%=exercise._id%>">Edit</a>
                </div>
                <form class="col" action="/exercises/<%=exercise.id%>?_method=DELETE" method="POST">
                    <button class="btn btn-danger btn-block">Delete</button>
                </form>
            </div>
        </div>
    </div>
<% } %>

<script>
    function submitConvertAction() {
        location.href = document.querySelector('form').getAttribute('action') + this.search_bar.value;
    }
</script>